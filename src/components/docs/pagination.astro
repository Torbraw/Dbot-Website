---
import i18next from 'i18next';
import { paginate } from '../../utils';

export interface Props {
  currentPage: string;
}

const { currentPage } = Astro.props;
const currentLanguage = i18next.language;

const hasTrailing = currentPage.endsWith('/');
const currentPageMatch = currentPage.slice(1, hasTrailing ? -1 : currentPage.length);
const { next, prev } = paginate(currentLanguage, currentPageMatch);
---

<div
  class="text-t3-purple-800 dark:text-t3-purple-200 mt-16 mb-8 flex flex-row items-center justify-between px-4 pt-4 font-medium lg:px-8"
>
  <div class="min-w-0 flex-1">
    {
      prev ? (
        <a
          class="hover:text-t3-purple-400 dark:hover:text-t3-purple-100 underline-offset-2 hover:underline"
          rel="prev"
          href={(Astro.site?.pathname || '') + prev.link}
        >
          <svg
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            height={24}
            class="mr-1 inline flex-shrink-0 rotate-180 transform"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M9 5l7 7-7 7" />
          </svg>
          {prev.text}
        </a>
      ) : null
    }
  </div>
  <div class="min-w-0 flex-1 text-right">
    {
      next ? (
        <a
          rel="next"
          class="hover:text-t3-purple-400 dark:hover:text-t3-purple-100 underline-offset-2 hover:underline"
          href={(Astro.site?.pathname || '') + next.link}
        >
          {next.text}
          <svg
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            height={24}
            class="ml-1 inline flex-shrink-0 transform"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M9 5l7 7-7 7" />
          </svg>
        </a>
      ) : null
    }
  </div>
</div>
